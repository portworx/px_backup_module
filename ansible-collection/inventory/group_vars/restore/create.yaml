---
# Define restores list
restores:
  # Example restore 1: Application restore
  - name: "restore-from-rancher-to-rancher-ansible"
    backup_ref:
      name: "rancher-backup"
    cluster_ref:
      name: "destination-rancher"
    # namespace_mapping: 
    #   "pvcsix": "pvcsix11178"
    replace_policy: "Retain"
    rancher_project_mapping:
      key: "c-m-b9x5wwqs:p-knzw9"
      value: "c-m-b9x5wwqs:p-knzw9"
    rancher_project_name_mapping:
      key: ""
      value: ""
    # storage_class_mapping:
    #   "px-db": "px-db"
  #  Example restore 1a: Single File Restore Request 
  - name: "sfr-restore"
    backup_ref:
      name: "test1"
    cluster_ref:
      name: "pg-ocp"
    replace_policy: "Retain"
    #(Single File Restore only params)
    is_sfr: true
    file_level_restore_info: 
      - volume_name: pvc-73bfd2cc-846e-4b45-befb-44cf89021f2a
        virtual_machine_name: fio-vm-multi-disk
        restore_files:
          source_path: test-folder/USER.md
          destination_path: "test-folder-restored/USER.md"
          is_dir: false

  # Example restore 2: Basic restore with resource exclusion (v2.11.0)
  - name: "basic-restore-with-exclusion"
    backup_ref:
      name: "one-big-backup"
    cluster_ref:
      name: "adarsh-ocp"
    exclude_resources:
      - name: "sensitive-secret"
        namespace: "openshift"
        gvk: "v1/Secret"
      - name: "temp-configmap"
        namespace: "openshift"
        gvk: "v1/ConfigMap"

#   # Example restore 3: Restore with namespace filtering (v2.11.0)
  - name: "namespace-filtered-restore-1"
    backup_ref:
      name: "one-big-backup"
    cluster_ref:
       name: "adarsh-ocp"
    filter:
      namespace_filter:
        namespace_name_pattern: "openshift*"
        exclude_namespaces:
          - "kube-system"
          - "kube-public"
          - "px-system"
        gvks:
          - "apps/v1/Deployment"
          - "v1/Service"
          - "v1/PersistentVolumeClaim"
        resource_name_pattern: "config*"

#   # Example restore 4: Restore with VM filtering (v2.11.0)
  - name: "vm-filtered-restore"
    backup_ref:
      name: "vm-backup"
    cluster_ref:
      name: "vm-cluster"
    filter:
      virtual_machine_filter:
        vm_name_pattern: "production-vm-.*"
    namespace_mapping: 
      "vm-production": "vm-production"
      "vm-staging": "vm-staging"

  # Example restore 5: Namespace filtering only (v2.11.0+)
  - name: "comprehensive-filtered-restore"
    backup_ref:
      name: "full-backup"
    cluster_ref:
      name: "target-cluster"
    exclude_resources:
      - name: "temp-data"
        namespace: "default"
        gvk: "v1/Secret"
      - name: "cache-config"
        namespace: "app"
        gvk: "v1/ConfigMap"
    filter:
      namespace_filter:
        namespace_name_pattern: "app-.*" 
        exclude_namespaces:
          - "app-temp"
          - "app-cache"
        include_resources:
          - name: "critical-deployment"
            namespace: "app-prod"
            gvk: "apps/v1/Deployment"
          - name: "database-statefulset"
            namespace: "app-prod"
            gvk: "apps/v1/StatefulSet"
        exclude_resources:
          - name: "test-deployment"
            namespace: "app-prod"
            gvk: "apps/v1/Deployment"
        gvks:
          - "apps/v1/Deployment"
          - "apps/v1/StatefulSet"
          - "v1/Service"
        resource_name_pattern: "prod-.*"
    namespace_mapping:
      "app-prod": "restored-app-prod"
      "app-staging": "restored-app-staging"
    storage_class_mapping:
      "fast-ssd": "standard-ssd"
      "slow-hdd": "standard-hdd"
    replace_policy: "Delete"

  # Example restore 6: Restore with specific resource inclusion and exclusion (v2.11.0+)
  - name: "selective-restore"
    backup_ref:
      name: "application-backup"
    cluster_ref:
      name: "staging-cluster"
    include_resources:
      - name: "web-deployment"
        namespace: "default"
        gvk: "apps/v1/Deployment"
      - name: "web-service"
        namespace: "default"
        gvk: "v1/Service"
    exclude_resources:
      - name: "debug-configmap"
        namespace: "default"
        gvk: "v1/ConfigMap"
    filter:
      namespace_filter:
        include_namespaces:
          - "default"
          - "app"
        gvks:
          - "apps/v1/Deployment"
          - "v1/Service"

  # Example restore 7: VM filtering with os_name parameter (v2.11.0+)
  - name: "vm-os-filtered-restore"
    backup_ref:
      name: "vm-backup-mixed-os"
    cluster_ref:
      name: "vm-cluster"
    filter:
      virtual_machine_filter:
        vm_name_pattern: "prod-*"
        os_name:
          - "ubuntu"
          - "centos"
          - "rhel"
    virtual_machine_restore_options:
      skip_mac_masking: true
      skip_vm_restart: false

  # Example restore 8: VM filtering with include_vms and exclude_vms (v2.11.0+)
  - name: "vm-selective-restore"
    backup_ref:
      name: "vm-backup-comprehensive"
    cluster_ref:
      name: "vm-cluster"
    filter:
      virtual_machine_filter:
        include_vms:
          - name: "critical-vm-1"
            namespace: "production"
          - name: "critical-vm-2"
            namespace: "production"
          - name: "database-vm"
            namespace: "data"
        exclude_vms:
          - name: "test-vm"
            namespace: "production"
          - name: "temp-vm"
            namespace: "staging"
    virtual_machine_restore_options:
      skip_mac_masking: false
      skip_vm_restart: true

  # Example restore 9: Complete VM filtering with all parameters (v2.11.0+)
  - name: "vm-comprehensive-filtering"
    backup_ref:
      name: "vm-backup-full"
    cluster_ref:
      name: "vm-cluster"
    filter:
      virtual_machine_filter:
        vm_name_pattern: "app-*"
        os_name:
          - "ubuntu"
          - "windows"
        include_vms:
          - name: "app-web-vm"
            namespace: "frontend"
          - name: "app-db-vm"
            namespace: "backend"
        exclude_vms:
          - name: "app-test-vm"
            namespace: "frontend"
    virtual_machine_restore_options:
      skip_mac_masking: true
      skip_vm_restart: true
    namespace_mapping:
      "frontend": "restored-frontend"
      "backend": "restored-backend"

  # Example restore 10: Advanced namespace filtering with all resource options (v2.11.0+)
  - name: "advanced-namespace-resource-filtering"
    backup_ref:
      name: "complex-backup"
    cluster_ref:
      name: "target-cluster"
    filter:
      namespace_filter:
        namespace_name_pattern: "microservice-*"
        include_namespaces:
          - "microservice-auth"
          - "microservice-api"
          - "microservice-data"
        exclude_namespaces:
          - "microservice-test"
          - "microservice-temp"
        include_resources:
          - name: "auth-deployment"
            namespace: "microservice-auth"
            gvk: "apps/v1/Deployment"
          - name: "api-service"
            namespace: "microservice-api"
            gvk: "v1/Service"
          - name: "data-pvc"
            namespace: "microservice-data"
            gvk: "v1/PersistentVolumeClaim"
        exclude_resources:
          - name: "debug-pod"
            namespace: "microservice-auth"
            gvk: "v1/Pod"
          - name: "temp-job"
            namespace: "microservice-api"
            gvk: "batch/v1/Job"
        gvks:
          - "apps/v1/Deployment"
          - "apps/v1/StatefulSet"
          - "v1/Service"
          - "v1/PersistentVolumeClaim"
        resource_name_pattern: "prod-*"
    namespace_mapping:
      "microservice-auth": "restored-auth"
      "microservice-api": "restored-api"
      "microservice-data": "restored-data"
    storage_class_mapping:
      "fast-ssd": "premium-ssd"
      "standard": "basic"

  # Example restore 11: Cluster-scoped resources (no namespace) (v2.11.0+)
  - name: "cluster-scoped-resources-restore"
    backup_ref:
      name: "cluster-backup"
    cluster_ref:
      name: "target-cluster"
    include_resources:
      - name: "custom-cluster-role"
        gvk: "rbac.authorization.k8s.io/v1/ClusterRole"
      - name: "storage-class-fast"
        gvk: "storage.k8s.io/v1/StorageClass"
      - name: "persistent-volume-1"
        gvk: "v1/PersistentVolume"
    exclude_resources:
      - name: "temp-cluster-role"
        gvk: "rbac.authorization.k8s.io/v1/ClusterRole"

  # Example restore 12: Core API resources (empty group) (v2.11.0+)
  - name: "core-api-resources-restore"
    backup_ref:
      name: "core-resources-backup"
    cluster_ref:
      name: "target-cluster"
    filter:
      namespace_filter:
        include_namespaces:
          - "default"
          - "kube-system"
        gvks:
          - "v1/Service"
          - "v1/ConfigMap"
          - "v1/Secret"
          - "v1/PersistentVolumeClaim"
        resource_name_pattern: "app-*"

  # Example restore 13: Mixed VM and namespace filtering (v2.11.0+)
  - name: "mixed-vm-namespace-filtering"
    backup_ref:
      name: "hybrid-backup"
    cluster_ref:
      name: "hybrid-cluster"
    filter:
      namespace_filter:
        namespace_name_pattern: "vm-*"
        include_namespaces:
          - "vm-production"
          - "vm-staging"
        gvks:
          - "kubevirt.io/v1/VirtualMachine"
          - "v1/Service"
      virtual_machine_filter:
        vm_name_pattern: "critical-*"
        os_name:
          - "ubuntu"
        include_vms:
          - name: "critical-app-vm"
            namespace: "vm-production"
        exclude_vms:
          - name: "critical-test-vm"
            namespace: "vm-staging"
    virtual_machine_restore_options:
      skip_mac_masking: true
      skip_vm_restart: false

  # Example restore 14: Resource exclusion only (v2.11.0+)
  - name: "exclusion-only-restore"
    backup_ref:
      name: "full-application-backup"
    cluster_ref:
      name: "production-cluster"
    exclude_resources:
      - name: "debug-deployment"
        namespace: "app"
        gvk: "apps/v1/Deployment"
      - name: "test-secret"
        namespace: "app"
        gvk: "v1/Secret"
      - name: "temp-configmap"
        namespace: "app"
        gvk: "v1/ConfigMap"
      - name: "monitoring-pod"
        namespace: "app"
        gvk: "v1/Pod"

  # Example restore 15: VM restore options only (v2.11.0+)
  - name: "vm-restore-options-only"
    backup_ref:
      name: "vm-backup-simple"
    cluster_ref:
      name: "vm-cluster"
    virtual_machine_restore_options:
      skip_mac_masking: false
      skip_vm_restart: true

  # Example restore 16: Complex multi-feature restore (v2.11.0+)
  - name: "complex-multi-feature-restore"
    backup_ref:
      name: "enterprise-backup"
    cluster_ref:
      name: "enterprise-cluster"
    include_resources:
      - name: "critical-app"
        namespace: "production"
        gvk: "apps/v1/Deployment"
      - name: "database-statefulset"
        namespace: "data"
        gvk: "apps/v1/StatefulSet"
    exclude_resources:
      - name: "temp-job"
        namespace: "production"
        gvk: "batch/v1/Job"
    filter:
      namespace_filter:
        namespace_name_pattern: "prod-*"
        include_namespaces:
          - "production"
          - "data"
          - "monitoring"
        exclude_namespaces:
          - "prod-temp"
        include_resources:
          - name: "web-service"
            namespace: "production"
            gvk: "v1/Service"
        exclude_resources:
          - name: "debug-pod"
            namespace: "production"
            gvk: "v1/Pod"
        gvks:
          - "apps/v1/Deployment"
          - "apps/v1/StatefulSet"
          - "v1/Service"
        resource_name_pattern: "app-*"
      virtual_machine_filter:
        vm_name_pattern: "enterprise-*"
        os_name:
          - "ubuntu"
          - "centos"
        include_vms:
          - name: "enterprise-db-vm"
            namespace: "data"
        exclude_vms:
          - name: "enterprise-test-vm"
            namespace: "production"
    virtual_machine_restore_options:
      skip_mac_masking: true
      skip_vm_restart: false
    namespace_mapping:
      "production": "restored-production"
      "data": "restored-data"
      "monitoring": "restored-monitoring"
    storage_class_mapping:
      "fast-ssd": "premium-ssd"
      "standard": "basic-ssd"
      "slow": "standard"
    replace_policy: "Delete"

  # Example restore 17: Target namespace prefix (v2.11.0+)
  - name: "target-namespace-prefix-restore"
    backup_ref:
      name: "multi-namespace-backup"
    cluster_ref:
      name: "target-cluster"
    target_namespace_prefix: "restored-"
    replace_policy: "Retain"

  # Example restore 18: Use source as target namespace (v2.11.0+)
  - name: "source-as-target-namespace-restore"
    backup_ref:
      name: "same-namespace-backup"
    cluster_ref:
      name: "target-cluster"
    use_source_as_target_namespace: true
    replace_policy: "Retain"

  # Example restore 19: Include optional resource types (v2.11.0+)
  - name: "optional-resource-types-restore"
    backup_ref:
      name: "comprehensive-backup"
    cluster_ref:
      name: "target-cluster"
    include_optional_resource_types:
      - "Jobs"
      - "CronJobs"
      - "DaemonSets"
      - "ReplicaSets"
    replace_policy: "Retain"

  # Example restore 20: Backup object type - All (v2.11.0+)
  - name: "backup-object-type-all-restore"
    backup_ref:
      name: "full-cluster-backup"
    cluster_ref:
      name: "target-cluster"
    backup_object_type:
      type: "All"
    replace_policy: "Retain"

  # Example restore 21: Backup object type - VirtualMachine (v2.11.0+)
  - name: "backup-object-type-vm-restore"
    backup_ref:
      name: "vm-only-backup"
    cluster_ref:
      name: "vm-cluster"
    backup_object_type:
      type: "VirtualMachine"
    virtual_machine_restore_options:
      skip_mac_masking: true
      skip_vm_restart: false

  # Example restore 22: Rancher project name mapping (v2.11.0+)
  - name: "rancher-project-name-mapping-restore"
    backup_ref:
      name: "rancher-backup"
    cluster_ref:
      name: "rancher-cluster"
    rancher_project_name_mapping:
      key: "source-project-name"
      value: "target-project-name"
    replace_policy: "Retain"

  # Example restore 23: GVK format testing - Core resources (v2.11.0+)
  - name: "gvk-core-resources-restore"
    backup_ref:
      name: "core-resources-backup"
    cluster_ref:
      name: "target-cluster"
    filter:
      namespace_filter:
        include_namespaces:
          - "default"
          - "app"
        gvks:
          - "v1/Service"
          - "v1/ConfigMap"
          - "v1/Secret"
          - "v1/PersistentVolumeClaim"
          - "v1/Pod"
        resource_name_pattern: "app-*"

  # Example restore 24: GVK format testing - Non-core resources (v2.11.0+)
  - name: "gvk-non-core-resources-restore"
    backup_ref:
      name: "app-resources-backup"
    cluster_ref:
      name: "target-cluster"
    filter:
      namespace_filter:
        include_namespaces:
          - "default"
          - "app"
        gvks:
          - "apps/v1/Deployment"
          - "apps/v1/StatefulSet"
          - "apps/v1/DaemonSet"
          - "batch/v1/Job"
          - "batch/v1/CronJob"
        resource_name_pattern: "prod-*"

  # Example restore 25: Server validation test - Conflicting parameters (v2.11.0+)
  - name: "server-validation-conflict-test"
    backup_ref:
      name: "test-backup"
    cluster_ref:
      name: "test-cluster"
    include_resources:
      - name: "test-deployment"
        namespace: "default"
        gvk: "apps/v1/Deployment"
    exclude_resources:
      - name: "test-deployment"
        namespace: "default"
        gvk: "apps/v1/Deployment"
    filter:
      namespace_filter:
        include_namespaces:
          - "default"
        exclude_namespaces:
          - "default"

  # Example restore 26: Complete comprehensive restore with all parameters (v2.11.0+)
  - name: "complete-comprehensive-restore"
    backup_ref:
      name: "enterprise-full-backup"
      uid: "backup-uid-123456"
    cluster_ref:
      name: "enterprise-target-cluster"
      uid: "cluster-uid-789012"
    replace_policy: "Delete"
    namespace_mapping:
      "production": "restored-production"
      "staging": "restored-staging"
      "data": "restored-data"
    storage_class_mapping:
      "fast-ssd": "premium-ssd"
      "standard": "gp2"
      "slow": "standard"
    rancher_project_mapping:
      key: "c-m-source:p-12345"
      value: "c-m-target:p-67890"
    rancher_project_name_mapping:
      key: "source-enterprise-project"
      value: "target-enterprise-project"
    backup_object_type:
      type: "All"
    include_optional_resource_types:
      - "Jobs"
      - "CronJobs"
      - "DaemonSets"
    include_resources:
      - name: "critical-app"
        namespace: "production"
        gvk: "apps/v1/Deployment"
      - name: "database-service"
        namespace: "data"
        gvk: "v1/Service"
    exclude_resources:
      - name: "temp-secret"
        namespace: "production"
        gvk: "v1/Secret"
      - name: "debug-configmap"
        namespace: "staging"
        gvk: "v1/ConfigMap"
    filter:
      namespace_filter:
        namespace_name_pattern: "prod-*|staging-*|data-*"
        include_namespaces:
          - "production"
          - "staging"
          - "data"
        exclude_namespaces:
          - "prod-temp"
          - "staging-test"
        include_resources:
          - name: "web-service"
            namespace: "production"
            gvk: "v1/Service"
          - name: "api-deployment"
            namespace: "production"
            gvk: "apps/v1/Deployment"
        exclude_resources:
          - name: "debug-pod"
            namespace: "production"
            gvk: "v1/Pod"
        gvks:
          - "apps/v1/Deployment"
          - "apps/v1/StatefulSet"
          - "v1/Service"
          - "v1/ConfigMap"
          - "v1/Secret"
          - "v1/PersistentVolumeClaim"
        resource_name_pattern: "app-*|web-*|api-*"
      virtual_machine_filter:
        vm_name_pattern: "enterprise-*"
        os_name:
          - "ubuntu"
          - "centos"
          - "rhel"
        include_vms:
          - name: "enterprise-db-vm"
            namespace: "data"
            os_name: "ubuntu"
          - name: "enterprise-web-vm"
            namespace: "production"
            os_name: "centos"
        exclude_vms:
          - name: "enterprise-test-vm"
            namespace: "staging"
            os_name: "ubuntu"
    virtual_machine_restore_options:
      skip_mac_masking: true
      skip_vm_restart: false
